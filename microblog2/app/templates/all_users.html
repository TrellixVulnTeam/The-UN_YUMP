{% extends "base.html" %}

{% block app_content %}
<ol style="background-color: white;" class="breadcrumb">
  <li><a href="{{ url_for('main.index') }}">{{ _('Home') }}</a></li>
  <li class="active">{{ _('Users') }}</li>
</ol>

<h4 style="color: rgb(178, 34, 34); font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">
  <b><u><big>{{ _('All Users') }}</big></u></b></h4>
<p style="color: grey; text-align: right;">{{ _("sorted by 'Most Recently Active'") }}</p>
{% for user in users %}
<!-- this is the post variable used in _post.html-->
{% if user %}
{% set admin_username = 'tony' %}
<table class="table table-hover">
  <tr>
    <td width="70px">
      <br>
      <a href="{{ url_for('main.user', username=user.username) }}">
        <img style="border-radius: 50%;" src="{{ user.avatar(70) }}" />
      </a>
      {% if user.username == admin_username %}
      <p style="text-align: center; color:mediumblue; font-size: small;">{{ _('Admin') }}</p>{% endif %}
    </td>
    <td>
      <br>
      <a style="color: rgb(178, 34, 34);"
        href="{{ url_for('main.user', username=user.username) }}"><b><big>{{ user.username.title() }}</big></b></a><br>
      {% if user.last_seen %}<p style="color: forestgreen;"><span class="glyphicon glyphicon-time"
          aria-hidden="true"></span><span> <u>{{ _('Last Active') }}</u></span>:
        {{ _('%(when)s', when=moment(user.last_seen).fromNow()) }}</p>{% endif %}
      {% if user == current_user %}
      {% elif not current_user.is_following(user) %}
      <p>
        <form action="{{ url_for('main.follow', username=user.username) }}" method="post">
          {{ form.hidden_tag() }}
          {{ form.submit(value=_('Follow'), style ="color: white; background-color: rgb(0, 140, 255);",  class_='btn btn-sm') }}
        </form>
      </p>
      {% else %}
      <p>
        <b>You follow this user</b>
      </p>
      {% endif %}
    </td>
  </tr>
  </td>
  </tr>
</table>
{% endif %}
{% endfor %}
{% if users %}
<nav aria-label="...">
  <ul class="pager">
    <li class="previous{% if not prev_url %} disabled{% endif %}">
      <a href="{{ prev_url or '#' }}">
        <span aria-hidden="true">&larr;</span> {{ _('Next page') }}
      </a>
    </li>
    <li class="next{% if not next_url %} disabled{% endif %}">
      <a href="{{ next_url or '#' }}">
        {{ _('Previous page') }} <span aria-hidden="true">&rarr;</span>
      </a>
    </li>
  </ul>
</nav>
{% else %}
<br><br><br><br>
<p style="text-align: center; color:dimgrey ;">{{ _('No users are signed up') }}</p>
{% endif %}
{% endblock %}